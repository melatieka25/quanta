<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <title>Detail Konsultasi</title>
    <object th:include="fragments/fragment :: css" th:remove="tag"></object>
    <object th:include="fragments/fragment :: js" th:remove="tag"></object>
    <link href='https://fonts.googleapis.com/css?family=DM Sans' rel='stylesheet'>
    <style>
        body {
            font-family: 'DM Sans';
        }
    </style>
</head>
<body>
<nav th:replace="fragments/fragment :: navbar (${'user'})"></nav>
<!--<a class="btn btn-link" style="color: #31318B" href="/konsultasi/viewall"><- List Konsultasi</a>-->
<div class="container">
    <h2 style="font-weight: bold; text-align:center; padding:20px">Detail Konsultasi</h2>
    <div class="alert alert-success" role="alert" th:text="${message}" th:if="${message}"></div>
    <div class="alert alert-danger" role="alert" th:text="${errorMessage}" th:if="${errorMessage}"></div>
    <div class="container" style="width:600px;">
        <div class="card mt-3" style="background-color:#F7FAFC">
            <div class="card-body">
                <div class="container">
                    <br>
                    <div class="row">
                        <div class="col">
                            <h4 style="padding-bottom:20px; font-weight: bold;" >Data Konsultasi</h4>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <p style="font-weight: bold; color: #31318B">Nama Pengajar</p>
                        </div>
                        <div class="col-8">
                            <p th:text="${konsultasi.pengajarKonsul.name}"></p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <p style="font-weight: bold; color: #31318B">Mata Pelajaran</p>
                        </div>
                        <div class="col-8">
                            <p th:text="${konsultasi.mapelKonsul.name}"></p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <p style="font-weight: bold; color: #31318B">Topik</p>
                        </div>
                        <div class="col-8">
                            <p th:text="${konsultasi.topic}"></p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <p style="font-weight: bold; color: #31318B">Tanggal Konsultasi</p>
                        </div>
                        <div class="col-8">
                            <p th:text="${#temporals.format(konsultasi.startTime, 'dd MMMM yyyy')}"></p>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col">
                            <p style="font-weight: bold; color: #31318B">Waktu</p>
                        </div>
                        <div class="col-8">
                            <p th:text="${#temporals.format(konsultasi.startTime, 'HH:mm')} + ' - ' +${#temporals.format(konsultasi.endTime, 'HH:mm')}"></p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <p style="font-weight: bold; color: #31318B">Jumlah Peserta</p>
                        </div>
                        <div class="col-8">
                            <td th:text="${listSiswaKonsultasi.size()}"></td>
                        </div>
                    </div>


                    <div class="row">
                        <div class="col">
                            <p style="font-weight: bold; color: #31318B">Status</p>
                        </div>
                        <div class="col-8">
                            <td th:if="${konsultasi.status.toString().equals('PENDING')}" style="color:orange" th:text="${konsultasi.status.toString().toLowerCase()}"></td>
                            <td th:if="${konsultasi.status.toString().equals('DITERIMA')}" style="color:darkblue" th:text="${konsultasi.status.toString().toLowerCase()}"></td>
                            <td th:if="${konsultasi.status.toString().equals('DITOLAK')}" style="color:red" th:text="${konsultasi.status.toString().toLowerCase()}"></td>
                            <td th:if="${konsultasi.status.toString().equals('DITUTUP')}" th:text="${konsultasi.status.toString().toLowerCase()}"></td>

                        </div>
                    </div>

                    <br>
                    <a class="btn btn-primary" onclick="history.go(-1)">Lihat Semua Konsultasi</a>


                    <br>
                </div>
            </div>
        </div>
    </div>

    <!--  Daftar anggota-->
    <div class="container" style="width:600px;">
        <div class="card mt-3" style="background-color:#F7FAFC">
            <div class="card-body">
                <div class="container">
                    <br>
                    <div class="row">
                        <div class="col">
                            <h4 style="padding-bottom:20px; font-weight: bold;" >Daftar Anggota Konsultasi</h4>
                        </div>

                        <div class="col-3">
                            <button th:if="${konsultasi.status.ordinal() == 0}"  type="button" class="btn btn-outline-warning" data-toggle="modal" data-target="#modal-update" >Cancel</button>
                            <button th:unless="${konsultasi.status.ordinal() == 0}"  type="button" class="btn disabled" >Cancel</button>


                            <!-- Modal -->
                            <div class="modal fade" id="modal-update" tabindex="-1" role="dialog" aria-labelledby="popupLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="popupLabel"><strong>Konfirmasi Batal Mengikuti Konsultasi</strong></h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            Apakah Anda yakin ingin batal mengikuti konsultasi ini?
                                            <br>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Batal</button>
                                            <a class="btn btn-primary"  style="background-color: #31318B; border-color: #31318B" th:href="@{/konsultasi/cancel/} + ${konsultasi.id}">Yakin</a>
                                        </div>
                                    </div>
                                    <br>
                                </div>
                            </div>
<!--end modal-->
                        </div>

                    </div>

                    <!--          table daftar siswa-->
                    <div th:if="*{listSiswaKonsultasi.size() != 0}">
                        <table class="table">
                            <thead>
                            <tr>
                                <th style="font-weight: bold; color: #31318B">Nama</th>
                                <th style="font-weight: bold; color: #31318B">Kelas</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="siswaKonsultasi, iterationStatus : ${listSiswaKonsultasi}">
                                <td th:text="${siswaKonsultasi.siswaKonsul.name}"></td>
                                <td th:text="${siswaKonsultasi.siswaKonsul.kelasBimbel.name}"></td>

                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <div th:unless="${listSiswaKonsultasi.size() != 0}">
                        <p>Tidak ada siswa konsultasi!</p>
                    </div>
                    <!--          batas table-->


                    <br>
                </div>
            </div>
        </div>
    </div>
</div>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
</html>